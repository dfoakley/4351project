<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="../client/register.css">
</head>
<body>
    <h1>Register Your Account</h1>
    <form id = "reg-form" method = "POST" action ="javascript:postUser()" onsubmit = "return Validation()">
        <div class="main-holder" id="signup-form">
            <input type="text" placeholder="Username" name="userName" id="userName" required>

            <input type="password" placeholder="Password" name="passWord" id="passWord" required>
            
            <input type="password" placeholder="Confirm Password" name="confirm" id="confirm" required>

            <input type="text" placeholder = "Full Name" name="fname" id="fname" required>

            <input type="text" placeholder = "johndoe@gmail.com" name = "email" id = "email" required>

            <!--input type="text" placeholder = "Diner Number" name = "dinerNumber" id = "dinerNumber"-->

            <input type="text" placeholder = "Phone Number" name = "phoneNumber" id = "phoneNumber" required>

            <!--input type="text" placeholder = "ID" name = "id" id = "id" required-->

            <!--input type="text" placeholder = "Points" name = "points" id = "points" required-->

            <!--input type="text" placeholder = "Preferred Payment" name = "preferredPayment" id = "preferredPayment" required-->

            <input type="text" placeholder="Billing Address" name="billingAddress" id="billingAddress" required>
            
            <input type="text" placeholder="Mailing Address" name="mailingAddress" id="mailingAddress" required>








    
            <p><i>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</i></p>
            <button type="submit" class="registerbtn" id="rgtbtn">Register</button>
    
            <div class="container-signin" id="signin">
                <p><i>Already have an account? <a href="login">Sign in</a>.</i></p>
            </div>
            </div>
        
         
    </form>

    

    <script>
        function Validation(){
            var pw1 = document.getElementById("passWord").value 
            var pw2 = document.getElementById("confirm").value
            if(pw1 != pw2)  
            {   
                alert("Passwords did not match")
                return false;
            } else {  
                alert("Password created successfully")
               // return true;
               /*
                var url = "https://json-server-4351.herokuapp.com/User/";

	
		var formElements = document.forms['reg-form'].elements

		var xhr = new XMLHttpRequest();
		xhr.open("POST", url);
		xhr.setRequestHeader("Accept", "application/json");
		xhr.setRequestHeader("Content-Type", "application/json");

		xhr.onreadystatechange = function () {
		if (xhr.readyState === 4) {
			console.log(xhr.status);
			console.log(xhr.responseText);
		}};



		var data = {
            "billingAddress": formElements['billingAddress'].value,
            "dinerNumber": parseInt(formElements['dinerNumber'].value),
            "email": formElements['email'].value,
            "id": parseInt(formElements['id'].value),
            "mailingAddress": formElements['mailingaddress'].value,
            "name": formElements['fname'].value,
            "passWord": formElements['passWord'].value,
            "phoneNumber": parseInt(formElements['phoneNumber'].value),
            "points": parseInt(formElements['points'].value),
            "preferredPayment": formElements['preferredPayment'].value,
            "userName": formElements['userName'].value
        }
		console.log("sending", data);

		xhr.send(JSON.stringify(data));
		var response = xhr.responseText;
		console.log(response);
*/
        //window.location.href="login";
        return true;
	}
                
    }
    
        
    </script>  

<script type="text/javascript">
	var url = "https://json-server-4351.herokuapp.com/User/";

	function postUser() {
		var formElements = document.forms['reg-form'].elements

		var xhr = new XMLHttpRequest();
		xhr.open("POST", url);
		xhr.setRequestHeader("Accept", "application/json");
		xhr.setRequestHeader("Content-Type", "application/json");

		xhr.onreadystatechange = function () {
		if (xhr.readyState === 4) {
			console.log(xhr.status);
			console.log(xhr.responseText);
		}};



		var data = {
  "billingAddress": formElements['billingAddress'].value,
  "dinerNumber": parseInt(formElements['dinerNumber'].value),
  "email": formElements['email'].value,
  "id": parseInt(formElements['id'].value),
  "mailingAddress": formElements['mailingAddress'].value,
  "name": formElements['fname'].value,
  "passWord": formElements['passWord'].value,
  "phoneNumber": parseInt(formElements['phoneNumber'].value),
  "points": parseInt(formElements['points'].value),
  "preferredPayment": formElements['preferredPayment'].value,
  "userName": formElements['userName'].value
}
		console.log("sending", data);

		xhr.send(JSON.stringify(data));
		var response = xhr.responseText;
		console.log(response);
	}
</script>
        <script>
        /*
        function matchPassword() {  
            var pw1 = document.getElementById("password").value 
            var pw2 = document.getElementById("confirm").value
            if(pw1 != pw2)  
            {   
                alert("Passwords did not match")
            } else {  
                alert("Password created successfully")
            }  
        }  
        */
        /*
        const form = document.getElemenyById('reg-form')
        form.addEventListener('submit', registerUser)

        async function registerUser(event){
            event.preventDefault()
            const username = document.getElementById("username").value
            const password = document.getElementById("password").value
            const body = {username,password}

            const result = await fetch('http://localhost:9001/register' ,{
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(body)
            }).then((res)=> res.json())
        }
        */
       </script>
   
</body>
</html>